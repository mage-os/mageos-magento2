<?xml version="1.0" encoding="UTF-8"?>
<!--
/**
 * Copyright 2023 Adobe
 * All Rights Reserved.
 */
-->

<actionGroups xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:noNamespaceSchemaLocation="urn:magento:mftf:Test/etc/actionGroupSchema.xsd">
    <actionGroup name="AddNewTaxRateNoZipUIActionGroup">
        <annotations>
            <description>Goes to the Admin Tax Rules grid page. Adds the provided Tax Code.</description>
        </annotations>
        <arguments>
            <argument name="taxCode"/>
            <argument name="taxIdentifierSelector" type="string" defaultValue="{{AdminTaxRulesSection.taxIdentifier}}"/>
            <argument name="zipCodeSelector" type="string" defaultValue="{{AdminTaxRulesSection.zipCode}}"/>
            <argument name="stateSelector" type="string" defaultValue="{{AdminTaxRulesSection.state}}"/>
            <argument name="countrySelector" type="string" defaultValue="{{AdminTaxRulesSection.country}}"/>
            <argument name="rateSelector" type="string" defaultValue="{{AdminTaxRulesSection.rate}}"/>
            <argument name="addNewTaxRateSelector" type="string" defaultValue="{{AdminTaxRulesSection.addNewTaxRate}}"/>
            <argument name="saveSelector" type="string" defaultValue="{{AdminTaxRulesSection.save}}"/>
        </arguments>

        <!-- Go to the tax rate page -->
        <click stepKey="addNewTaxRate" selector="{{addNewTaxRateSelector}}"/>

        <!-- Fill out a new tax rate -->
        <fillField stepKey="fillTaxIdentifier" selector="{{taxIdentifierSelector}}" userInput="{{taxCode.identifier}}-{{taxCode.rate}}"/>
        <fillField stepKey="fillZipCode" selector="{{zipCodeSelector}}" userInput="{{taxCode.zip}}"/>
        <selectOption stepKey="selectState" selector="{{stateSelector}}" userInput="{{taxCode.state}}"/>
        <selectOption stepKey="selectCountry" selector="{{countrySelector}}" userInput="{{taxCode.country}}"/>
        <fillField stepKey="fillRate" selector="{{rateSelector}}" userInput="{{taxCode.rate}}"/>

        <!-- Save the tax rate -->
        <click stepKey="saveTaxRate" selector="{{saveSelector}}"/>
    </actionGroup>
</actionGroups>
