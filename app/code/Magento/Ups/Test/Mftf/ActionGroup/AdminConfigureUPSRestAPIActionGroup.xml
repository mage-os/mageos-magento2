<?xml version="1.0" encoding="UTF-8"?>
<actionGroups xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
              xsi:noNamespaceSchemaLocation="urn:magento:mftf:Test/etc/actionGroupSchema.xsd">
    <actionGroup name="AdminConfigureUPSRestAPIActionGroup">
        <annotations>
            <description>Configure UPS shipping method with REST API settings via admin UI</description>
        </annotations>
        <arguments>
            <argument name="gatewayUrl" type="string" defaultValue="{{_CREDS.magento/carriers_ups_gateway_rest_url}}"/>
            <argument name="username" type="string" defaultValue="{{_CREDS.magento/carriers_ups_rest_username}}"/>
            <argument name="password" type="string" defaultValue="{{_CREDS.magento/carriers_ups_rest_password}}"/>
            <argument name="shipperNumber" type="string"
                      defaultValue="{{_CREDS.magento/carriers_ups_rest_shipper_number}}"/>
            <argument name="accountMode" type="string" defaultValue="1"/>
        </arguments>
        <conditionalClick selector="{{AdminShippingMethodUPSSection.UPSTab}}"
                          dependentSelector="{{AdminShippingMethodUPSSection.handlingFee}}"
                          visible="false"
                          stepKey="openUPSTab"/>
        <uncheckOption selector="{{AdminShippingMethodUPSSection.enableCheckoutCheckbox}}"
                       stepKey="unCheckEnableForCheckout"/>
        <selectOption selector="{{AdminShippingMethodUPSSection.enableCheckoutSelect}}"
                      userInput="1"
                      stepKey="selectEnableForCheckoutToYes"/>
        <uncheckOption selector="{{AdminShippingMethodUPSSection.carriersUPSTypeSystem}}"
                       stepKey="unCheckTypeSystem"/>
        <selectOption selector="{{AdminShippingMethodUPSSection.carriersUpsType}}"
                      userInput="UPS_REST"
                      stepKey="selectRestOption"/>
        <uncheckOption selector="{{AdminShippingMethodUPSSection.liveAccountCheckbox}}"
                       stepKey="unCheckLiveAccountCheckbox"/>
        <selectOption selector="{{AdminShippingMethodUPSSection.liveAccountSelect}}"
                      userInput="{{accountMode}}"
                      stepKey="selectAccountMode"/>
        <uncheckOption selector="{{AdminShippingMethodUPSSection.carriersUpsGatewayRestUrlSystem}}"
                       stepKey="unCheckGatewayRestUrlSystem"/>
        <fillField selector="{{AdminShippingMethodUPSSection.carriersUpsGatewayRestUrl}}"
                   userInput="{{gatewayUrl}}"
                   stepKey="enterGateWayRestUrl"/>
        <fillField selector="{{AdminShippingMethodUPSSection.username}}"
                   userInput="{{username}}"
                   stepKey="enterUsername"/>
        <fillField selector="{{AdminShippingMethodUPSSection.password}}"
                   userInput="{{password}}"
                   stepKey="enterPassword"/>
        <fillField selector="{{AdminShippingMethodUPSSection.shipperNumberInput}}"
                   userInput="{{shipperNumber}}"
                   stepKey="enterShipperNumber"/>
        <click selector="{{AdminConfigSection.saveButton}}" stepKey="saveConfig"/>
        <waitForText selector="{{AdminMessagesSection.success}}"
                     userInput="You saved the configuration."
                     stepKey="assertConfigurationSaved"/>
    </actionGroup>
</actionGroups>
