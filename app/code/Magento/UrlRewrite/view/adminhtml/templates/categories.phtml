<?php
/**
 * Copyright 2014 Adobe
 * All Rights Reserved.
 */

/** @var \Magento\UrlRewrite\Block\Catalog\Category\Tree $block */
$root = $block->getRoot(null, 0)
?>
    <fieldset class="admin__fieldset" data-ui-id="category-selector">
        <legend class="admin__legend"><span><?= $block->escapeHtml(__('Select Category')) ?></span></legend>
        <div class="content content-category-tree">
            <input type="hidden" name="categories" id="product_categories" value=""/>
            <?php if ($root): ?>
                <div class="jstree-default"></div>
            <?php endif; ?>
        </div>
    </fieldset>
<?php if ($root): ?>
    <script type="text/x-magento-init">
    {
        ".jstree-default": {
            "categoryTree": {
                "data": <?= /* @noEscape */ $block->getTreeArray(null, true); ?>,
                "url": "<?= $block->escapeJs($block->escapeUrl($block->getLoadTreeUrl())); ?>"
            }
        }
    }

    </script>
<?php endif; ?>
